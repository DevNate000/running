-- To Do: Create ability to have friends

DROP TABLE runs;
DROP TABLE runnings;
DROP TABLE users;


CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    first_name TEXT,
    last_name TEXT,
    password TEXT,
    age INTEGER,
    gender TEXT,
    location TEXT,
    color TEXT,
    profile_picture TEXT,
    creation_date TIMESTAMP,
    last_login TIMESTAMP
);

INSERT INTO users (first_name, last_name, password, age, gender, location, color, profile_picture, creation_date, last_login)
VALUES
  ('Nate', 'Stubbs', 'nate123!', 19, 'Male', 'NSB', 'blue', 'nate_stubbs.jpg', '2025-09-20 10:20:10', '2025-09-23 10:20:10'),
  ('Noah', 'Mckinney', 'ben123!', 44, 'Male', 'MPS', 'red', 'ben_zobrist.png', '2025-09-22 10:20:10', '2025-09-25 10:20:10'),
  ('Dad', 'S', 'dad!', 25, 'Male', 'NSB', 'orange', 'dad.jpg', '2025-09-20', '2025-09-25'),
  ('Paul', 'S', 'paul!', 30, 'Male', 'NSB', 'lightblue', 'paul.jpg', '2025-09-21', '2025-09-25'),
  ('Marlee', 'N', 'm!', 28, 'Male', 'NSB', 'purple', 'marlee.jpg', '2025-09-22', '2025-09-26');


CREATE TABLE IF NOT EXISTS runs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER,
    miles INTEGER,
    start_time TIMESTAMP,
    end_time TIMESTAMP,
    start_location TEXT,
    end_location TEXT,
    weather_id INTEGER,
    is_legit BOOLEAN,
    FOREIGN KEY (user_id) REFERENCES users(id)
);


SELECT * FROM users;
SELECT * FROM runs;
SELECT
    first_name || ' ' || last_name AS Name,
    miles,
    start_time,
    end_time,
    printf('%02d:%02d:%02d',
        (strftime('%s', end_time) - strftime('%s', start_time)) / 3600,
        ((strftime('%s', end_time) - strftime('%s', start_time)) % 3600) / 60,
        (strftime('%s', end_time) - strftime('%s', start_time)) % 60
    ) AS time
FROM runs
LEFT JOIN users ON runs.user_id = users.id;



CREATE TABLE IF NOT EXISTS runnings (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    route_coords TEXT NOT NULL,
    miles REAL NOT NULL,
    time TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

INSERT INTO runnings (user_id, route_coords, miles, time, created_at) VALUES
(1, '[[29.022832958888234, -80.91988563537599], [29.02091909926671, -80.92522859573366], [29.01281294767596, -80.9214735031128], [29.014501781716845, -80.91638803482057]]', 1.9, '29:45', '2025-09-27 00:58:44'),
(2, '[[29.027917648907284, -80.92194557189943], [29.02300182715198, -80.91997146606447], [29.029230996781216, -80.90259075164796], [29.038574046537022, -80.90276241302492]]', 3.51, '33:12', '2025-09-27 00:58:58'),
(3, '[[29.02729357524808, -80.89051008224489], [29.03669988827844, -80.89581012725831], [29.03673743671255, -80.90259075164796], [29.029189926892307, -80.90239763259889]]', 2.39, '42:03', '2025-09-27 00:59:12'),
(4, '[[29.027054582636303, -80.8902955055237], [29.025891307986505, -80.88969469070435], [29.02420266017471, -80.89362144470216], [29.007295897415403, -80.88306427001953], [29.009604086938314, -80.87785005569458], [29.027598690473685, -80.88894367218019]]', 3.54, '26:28', '2025-09-27 00:59:55'),
(5, '[[29.03321850202809, -80.98299264907838], [29.034664275527785, -80.98533153533936], [29.035077349951038, -80.98885059356691], [29.040052889249658, -80.99000930786134], [29.04686804994474, -80.99479436874391], [29.052443755668715, -80.98387241363527], [29.0488580670458, -80.98101854324342], [29.04395805017203, -80.98286390304565], [29.03930187982105, -80.98026752471925], [29.03716147296499, -80.9812116622925]]', 3.52, '40:15', '2025-09-27 01:00:25'),
(5, '[[28.985149671004198, -80.94402551651002], [28.979781312105164, -80.94269514083864], [28.98342281672031, -80.93269586563112], [28.990348829918908, -80.93574285507204], [28.990836824196116, -80.9345841407776], [28.992544786030056, -80.93527078628541], [28.99109958939146, -80.93954086303712], [28.9891851419643, -80.93801736831666], [28.987383276714656, -80.94183683395387]]', 2.65, '28:49', '2025-09-27 01:01:06'),
(4, '[[28.96648460304726, -80.93924045562746], [28.954102669806563, -80.93602180480958], [28.963122794827747, -80.92173099517824], [28.970563806355536, -80.92379093170167]]', 3.45, '38:22', '2025-09-27 01:01:24'),
(3, '[[29.004612327705928, -80.91439247131349], [29.00528791825236, -80.91134548187256], [28.986369713715145, -80.90035915374757], [28.985130901003924, -80.9035348892212]]', 3.36, '37:09', '2025-09-27 01:01:57'),
(2, '[[29.027677963573367, -80.9220314025879], [29.035152897802767, -80.92748165130617], [29.02854192835845, -80.94550609588624], [29.025386543694808, -80.94481945037843], [29.0254992376647, -80.94160079956056], [29.023095072964978, -80.9416437149048], [29.022944810812714, -80.94044208526613], [29.018136306500143, -80.9405279159546], [29.017986037132978, -80.9372663497925], [29.021104081703477, -80.93271732330324], [29.023545858109834, -80.92632293701173], [29.025874883342674, -80.92726707458498]]', 4.26, '44:07', '2025-09-27 01:02:18'),
(1, '[[29.06429120523475, -80.9137272834778], [29.064403738881865, -80.91490745544435], [29.06491013877358, -80.91535806655885], [29.065697866994075, -80.91460704803468], [29.066541854836345, -80.91585159301759], [29.070686672602676, -80.91628074645998], [29.071718162434387, -80.91409206390382], [29.07194321338939, -80.91256856918336], [29.069636417803626, -80.9110450744629], [29.067254550299552, -80.90977907180788], [29.065904175771408, -80.91042280197145], [29.06494764977772, -80.91119527816774], [29.06537902534423, -80.91370582580568], [29.065078938184705, -80.91396331787111]]', 1.6, '27:55', '2025-09-27 01:02:56'),
(2, '[[29.036904112944725, -80.89581012725831], [29.045844754597873, -80.89988708496095], [29.045844754597873, -80.90336322784425], [29.037091949516764, -80.90241909027101]]', 1.88, '34:36', '2025-09-27 01:03:10'),
(3, '[[29.045927820128036, -80.90003728866579], [29.045965338037213, -80.90121746063232], [29.056057160109255, -80.90578794479372], [29.05575704581774, -80.90660333633424], [29.058326746161203, -80.90799808502199], [29.058026638474754, -80.90907096862794], [29.05939587269591, -80.91040134429933], [29.059752245744118, -80.90797662734987], [29.061552848627386, -80.90877056121828], [29.06072757620918, -80.91194629669191], [29.046002855932777, -80.90310573577882]]', 3.08, '30:42', '2025-09-27 01:03:48'),
(5, '[[29.008646395766437, -80.87907314300539], [29.00687977289975, -80.8826780319214], [28.988560691348834, -80.8698034286499], [28.990515597453005, -80.86589813232423], [29.009348192636725, -80.87769985198976]]', 3.59, '41:51', '2025-09-27 01:04:16'),
(1, '[[29.04701583395541, -80.93456268310548], [29.042250998843596, -80.93181610107423], [29.042326037322397, -80.92915534973145], [29.04090029689419, -80.92872619628908], [29.04026245927229, -80.9300994873047], [29.036697999988498, -80.92730998992921], [29.038011236153256, -80.921688079834], [29.039249414946035, -80.91812610626222], [29.037748590257134, -80.91718196868898], [29.038048756940988, -80.91598033905031], [29.042138441023123, -80.91477870941164], [29.044727239829996, -80.91241836547853], [29.044389574103988, -80.90975761413576], [29.04405190727288, -80.90911388397218], [29.046565622728846, -80.90928554534914], [29.04907927693807, -80.912504196167], [29.05133025857288, -80.91683864593507], [29.053055977892825, -80.91696739196779], [29.05249324650455, -80.91486454010011], [29.049792093103733, -80.91053009033205], [29.05583207447249, -80.91460704803468], [29.055606988344444, -80.92254638671876], [29.056582358017884, -80.92666625976564], [29.055306872742868, -80.92670917510986], [29.053206039077853, -80.92426300048828], [29.051555354034658, -80.92250347137451], [29.0492293439086, -80.92198848724367], [29.048291421761128, -80.92344760894777], [29.04982960960759, -80.92417716979982], [29.049717060055105, -80.92490673065187], [29.048741625456163, -80.92439174652101], [29.047653629829856, -80.9251642227173], [29.046715693355996, -80.92756748199464], [29.046528105037957, -80.93095779418947], [29.047240938831933, -80.93203067779542], [29.049904642574358, -80.93057155609132], [29.052530762025945, -80.93194484710693], [29.0526433085083, -80.9346914291382], [29.05084255005385, -80.93396186828615], [29.0488916929179, -80.93439102172852]]', 7.53, '30:00', '2025-09-27 01:28:28');

SELECT * FROM runnings;
