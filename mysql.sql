-- To Do: Create ability to have friends

DROP TABLE runs;
DROP TABLE runnings;
DROP TABLE users;


CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username,
    first_name TEXT,
    last_name TEXT,
    password TEXT,
    age INTEGER,
    gender TEXT,
    location TEXT,
    color TEXT,
    profile_picture TEXT,
    creation_date TIMESTAMP,
    last_login TIMESTAMP
);


INSERT INTO users (username, first_name, last_name, password, age, gender, location, color, profile_picture, creation_date, last_login)
VALUES
    ('nate18', 'Nate', 'Smith', 'nate123!', 19, 'Male', 'NSB', 'lightblue', 'ns', '2025-09-20 10:20:10', '2025-09-23 10:20:10'),
    ('upcomingruns', 'Upcoming', 'Runs', 'nate123!', 19, 'Male', 'NSB', 'grey', 'upcoming', '2025-09-20 10:20:10', '2025-09-23 10:20:10'),
    ('noahmc', 'Noah', 'McDonald', 'nMcd!', 19, 'Male', 'MPS', 'red', 'default', '2025-09-22 10:20:10', '2025-09-25 10:20:10'),
    ('dadsm', 'Dad', 'Smith', 'dad!', 45, 'Male', 'NSB', 'orange', 'default', '2025-09-20', '2025-09-25'),
    ('paulsm', 'Paul', 'Smith', 'paul!', 15, 'Male', 'NSB', 'lightblue', 'default', '2025-09-21', '2025-09-25'),
    ('mnetworth', 'Marlee', 'Networth', 'm!', 15, 'Male', 'NSB', 'purple', 'default', '2025-09-22', '2025-09-26');

CREATE TABLE IF NOT EXISTS runs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER,
    miles INTEGER,
    start_time TIMESTAMP,
    end_time TIMESTAMP,
    start_location TEXT,
    end_location TEXT,
    weather_id INTEGER,
    is_legit BOOLEAN,
    FOREIGN KEY (user_id) REFERENCES users(id)
);


SELECT * FROM users;
SELECT * FROM runs;
SELECT
    first_name || ' ' || last_name AS Name,
    miles,
    start_time,
    end_time,
    printf('%02d:%02d:%02d',
        (strftime('%s', end_time) - strftime('%s', start_time)) / 3600,
        ((strftime('%s', end_time) - strftime('%s', start_time)) % 3600) / 60,
        (strftime('%s', end_time) - strftime('%s', start_time)) % 60
    ) AS time
FROM runs
LEFT JOIN users ON runs.user_id = users.id;



CREATE TABLE IF NOT EXISTS runnings (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    route_coords TEXT NOT NULL,
    miles REAL NOT NULL,
    time TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

INSERT INTO runnings VALUES(1,1,'[[29.027317255743366, -80.89046716690065], [29.0287056596365, -80.89297771453859], [29.02881823210684, -80.90020895004274], [29.029643759805342, -80.90220451354982], [29.029643759805342, -80.9016251564026], [29.036060136393502, -80.90166807174684], [29.036041375639837, -80.90070247650148], [29.038499005329864, -80.90074539184572], [29.03853652594025, -80.89671134948732], [29.027418103276574, -80.89050740003586]]',2.56000000000000005,'22:19','2025-09-19 15:04:01');
INSERT INTO runnings VALUES(2,1,'[[29.025741207077065, -80.92327594757081], [29.025000080638257, -80.92282533645631], [29.0247374016363, -80.9232544898987], [29.02209181157626, -80.92207431793214], [29.02908090072693, -80.90293407440187], [29.038461484705817, -80.90280532836915], [29.038602186975645, -80.90688228607179], [29.0372983385944, -80.90966105461122], [29.03207339961278, -80.91728925704956], [29.030366091126528, -80.91968178749086], [29.02793641113741, -80.92192411422731], [29.02683881494128, -80.9214735031128], [29.026078933816493, -80.92343688011171], [29.0258397108235, -80.9233269095421]]',3.85000000000000008,'36:38','2025-09-22 16:26:34');
INSERT INTO runnings VALUES(3,1,'[[29.045890302205194, -80.90312182903291], [29.038555286240342, -80.90280532836915], [29.038574046537022, -80.89702248573303], [29.039183754322462, -80.89707612991334], [29.04200712341071, -80.89893221855165], [29.042673089576923, -80.89917898178102], [29.04352664556133, -80.89923262596132], [29.043550094801894, -80.89868009090425], [29.045843404782453, -80.90001583099367], [29.045909061168306, -80.90122818946838], [29.05140529044806, -80.9037494659424], [29.054237703814447, -80.90499401092531], [29.054256461259595, -80.9070646762848], [29.050805033918405, -80.90548753738405], [29.046019270007804, -80.9031566977501]]',2.87999999999999989,'25:47','2025-09-24 15:08:28');
INSERT INTO runnings VALUES(4,1,'[[28.990719518089733, -80.86587667465211], [28.988762832613283, -80.87003946304323], [28.98974821841627, -80.87038278579713], [28.99740575375044, -80.87601542472841], [29.002191425313963, -80.8793091773987], [29.006395126541747, -80.88223814964296], [29.007345158096097, -80.88310718536378], [29.00968853191878, -80.87785005569458], [28.990949437933033, -80.86605906486513]]',3.64999999999999991,'35:49','2025-09-26 14:30:56');
INSERT INTO runnings VALUES(5,1,'[[29.025994502235193, -80.88971614837646], [29.024183897266106, -80.89362144470216], [29.014239076012707, -80.88726997375488], [29.00889099324022, -80.88454484939577], [29.007258365452426, -80.88308572769165], [29.00962285249548, -80.87785005569458], [29.027420448566886, -80.88873982429506], [29.026871649184816, -80.89015603065492], [29.02602968206911, -80.88966250419618]]',3.52000000000000001,'32:42','2025-09-27 10:25:40');
INSERT INTO runnings VALUES(6,1,'[[28.9928966977377, -80.90465873479845], [28.99166969372466, -80.90777277946474], [28.998757024640113, -80.91121673583986], [29.004368363367657, -80.91374874114992], [29.00522692762051, -80.91385602951051], [29.005818066074504, -80.91183364391328], [29.004706159990384, -80.9109538793564], [28.998381673387026, -80.90748310089113], [28.997293147045653, -80.90675354003908], [28.99301634744547, -80.90469628572465]]',2.33999999999999985,'20:45','2025-09-30 12:23:39');
INSERT INTO runnings VALUES(7,3,'[[29.047766181633662, -80.99498748779298], [29.039962299027206, -80.99378585815431], [29.040562618644305, -80.98279953002931], [29.04896672656691, -80.98228454589845]]',2.56000000000000005,'30:00','2025-09-30 20:45:01');
INSERT INTO runnings VALUES(10,2,'[[29.00588843947475, -80.91190338134767], [29.00487505788769, -80.91439247131349], [29.008027767968553, -80.91919898986818], [29.01515854305436, -80.92211723327638], [29.020937862768502, -80.92512130737306], [29.022814195730785, -80.91979980468751], [29.012981832322442, -80.9156370162964], [29.01054236062201, -80.91495037078859], [29.006071410091092, -80.91197848320009]]',3.10999999999999987,'30:00','2025-09-30 21:01:34');
INSERT INTO runnings VALUES(11,2,'[[29.035122094533666, -80.92769622802736], [29.028367941489027, -80.945463180542], [29.025441004603575, -80.94473361968996], [29.025516055303772, -80.94155788421632], [29.02296430089502, -80.9416437149048], [29.0228517220423, -80.94027042388917], [29.022926774624416, -80.93434810638429], [29.027805075454996, -80.9221601486206]]',3.60000000000000008,'30:00','2025-09-30 21:02:00');
INSERT INTO runnings VALUES(12,2,'[[28.985112131000268, -80.94404697418214], [28.979781312105164, -80.94267368316652], [28.983497897940854, -80.93273878097536], [28.990348829918908, -80.93576431274414], [28.990780517281657, -80.93449831008913], [28.992488480045665, -80.93518495559694], [28.991212202842203, -80.93956232070924], [28.98926021900173, -80.93801736831666], [28.987289428706045, -80.94194412231447], [28.986200785582824, -80.9417510032654]]',2.70000000000000017,'30:00','2025-09-30 21:02:24');
SELECT * FROM runnings;
